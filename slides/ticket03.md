# Билет №3
## Инструменты для обработки текста в командной строке. Назначение, возможности, преимущества.

## Просмотр

### cat/tac

* `cat` (catenate) позволяет создавать, копировать, сливать и отображать текстовые файлы
* `tac` делает то же самое, но в обратном порядке
    * файл просматривается не с начала, а с конца
    * крайне удобно при просмотре логов и различных отчетов

#### Примеры использования

* cat file1 file2 - вывод нескольких файлой
* cat file1 file2 > file3 - обЪединение файлов
* cat >file - создание файла

### head/tail

* `head` позволяет просмотреть начало файла (по умолчанию первые 10 строк)
    * полезна при необходимости просмотреть начало крайне большого файла, так как не загружает весь файл, а лишь его часть
    * удобна, если, например, необходимо просмотреть заголовок файла видео контента
* `tail` позволяет просмотреть последние строки файла (по умолчанию первые 10 строк)
    * экономит уйму времени на прокрутке в самый конец и загрузке большого файла
    * используется для проверки логов, журналов и отчетов

#### Примеры использования

* head file - вывести первые 10 строк файла
* tail file - вывести последние 10 строк файла

### less

* `less` используется для просмотра (но не изменения) содержимого текстовых файлов
* отображает файл с возможностью прокрутки
* возможна обратная прокрутка
* не нуждается в чтении всего файла перед стартом
    * быстрее работает с большими файлами

#### Примеры использования

* less /dir/file1 file2incurrentdir /dir3/file3 - открытие нескольких файлов

## Поиск

### grep

 * `grep` (global regular expression print) используется для поиска строк, соответствующих строке в тексте или содержимому файлов
 * может находить по шаблону или регулярным выражениям
 * позволяет выводить на консоль или в файл найденные строки/выражения/файлы

#### Примеры использования

* `grep -nIHR "^#" --include=*.md ./` - вывод всех заголовков в Markdown файлах ("`| wc -l`" добавит их подсчет)
* `grep -nIHR "class.*Matcher" --include=*.hpp -B1 ./` - печать деклараций всех классов, содержащих слово Matcher (+одна строка до)

## Обработка

### sed
* `sed` (Stream EDitor) редактирует поток данных для автоматического редактирования текстов
* вначале загружает в себя набор команд, а затем применяет весь набор команд к каждой строчке текста
* позволяет выполнять такие операции как добавление, вставка, удаление или замена
* может находить по шаблону или регулярным выражениям
* тьюринг-полный язык программирования

#### Примеры использования

* `sed 's/foo/bar/g'` — заменяет foo на bar
* `sed '/baz/s/foo/bar/g'` — то же самое, но если строка содержит baz
* `sed 's/[ \t]*$//'` — удалить "висячие" пробельные символы
* `sed '/regex/G'` — вставить пустую строку под каждой, содержащей "regex"
* `sed 'n;n;n;n;G;'` — вставить пустую строку через каждые 5
* `sed -n '$='` — посчитать количество строк
* `sed '1,10d'` — удалить первые 10 строк файла

### awk

* `awk` (Authors: Aho, Weinberger, Kernighan) - язык программирования со своими собственными правилами
* утилита для извлечения данных
* читает за один раз одну строку, выполняет определенные действия в зависимости от заданных опций, и выводит результат
* позволяет выполнить выбор столбца из текстового файла или из вывода другой команды
* содержит внутренние функции для математических вычислений, работы со строками, управления обменом данных и форматирования текста

#### Примеры использования

* `awk '{print NR "\t" $0}'` — распечатать файл с номерами строк
* `awk 'END{print NR}'` — вывести число строк в файле
* `awk '{print $2, $1}'` — распечатать второе и первое поле в обратном порядке
* `awk '{s=0; for (i=1; i<=NF; i++) s=s+$i; print s}'` — вывести сумму полей для каждой строки
* `awk '{sub(/[ \t]+$/, "")};1'` — удалить "висячие" пробельные символы
* `awk '{l=length();s=int((79-l)/2); printf "%"(s+l)"s\n",$0}' filename` — центрировать и распечатать файл


## Непрерывная интеграция. Назначение, преимущества, эволюция подходов, реализация.

__Непрерывная интеграция__ (англ. Continuous Integration) — это практика разработки ПО, которая заключается в выполнении частых автоматизированных сборок проекта для скорейшего выявления и решения интеграционных проблем.

## Назначение

Переход к непрерывной интеграции позволяет **снизить трудоёмкость** интеграции и сделать её более **предсказуемой** за счет наиболее раннего обнаружения и устранения ошибок и противоречий

* Каждое изменение должно интегрироваться
* Слово continuous в термине Continuous Integration означает «непрерывный/непрекращающийся»
    * Это означает, что в идеале сборка вашего проекта должна идти буквально все время
* Организация ночных сборок — это хорошая практика, но это не continuous integration
    * Ведь результаты такой ночной сборки будут доступны лишь на следующий день, когда их актуальность для разработчиков уже значительно снижена
* Принцип непрерывной интеграции не выполним без условия — «Сборка должна идти быстро».

## Преимущества

* основным преимуществом является сокращение стоимости исправления дефекта, за счёт раннего его выявления
* в __центральном репозитории__ есть абсолютно все, что нужно для сборки: исходный код, конфигурационные файлы, тестовые данные, сборочные и тестовые скрипты.
* __полная автоматизация__ операций с кодом: выкачивание из репозитория, сборка, тестирование и так далее.
* в первую очередь это безболезненная интеграция всего проекта. Интеграция различных модулей и правок происходит «сама» без участия людей и если что-то не так, вы об этом узнаете.
* если что-то не работает на сборочном сервере — значит оно не работает вообще. Сервер интеграции становится судьей в таких вопросах и этот судья беспристрастен.
* постоянное наличие текущей стабильной версии вместе с продуктами сборок — для тестирования, демонстрации, и т. п.
* все анализаторы кода и тесты, которые вы используете и написали, обязательно запускаются над каждой сборкой. Если в систему контроля версий попал «плохой» код — вы об этом узнаете.

## Эволюция подходов

* __Waterfall__: разделить на компоненты, реализовать, интеграция — отдельная фаза
* __Nightly build ('90s)__: интегрироваться часто, ночной билд (heartbeet of the project)
* __Continuous Integration ('00s)__: интегрироваться непрерывно, тестирование каждого вливания
* __Pre-commit Testing ('10s)__: интегрироваться непрерывно, но после проверки (основной подход на сегодняшний день) стабильности
* __Continuous Deployment ('10s)__: развертываться непрерывно, сразу после проверки стабильности

## Реализация

### Требования к проекту

* Исходный код и всё, что необходимо для сборки и тестирования проекта, хранится в центральном репозитории
* Операции копирования из репозитория, сборки и тестирования всего проекта автоматизированы и легко вызываются из внешней программы
* Реализация выполняется специальным сервером (Travic, BuildBot)
